var Layout=function(){var i="layouts/layout3/img/",r="layouts/layout3/css/",n=App.getResponsiveBreakpoint("md"),u=function(){$(".page-header").on("click",".search-form",function(){$(this).addClass("open");$(this).find(".form-control").focus();$(".page-header .search-form .form-control").on("blur",function(){$(this).closest(".search-form").removeClass("open");$(this).unbind("blur")})});$(".page-header").on("keypress",".hor-menu .search-form .form-control",function(n){if(n.which==13)return $(this).closest(".search-form").submit(),!1});$(".page-header").on("mousedown",".search-form.open .submit",function(n){n.preventDefault();n.stopPropagation();$(this).closest(".search-form").submit()});$("body").on("click",".page-header-top-fixed .page-header-top .menu-toggler",function(){App.scrollTop()})},f=function(){$(".page-header .menu-toggler").on("click",function(){if(App.getViewPort().width<n){var t=$(".page-header .page-header-menu");t.is(":visible")?t.slideUp(300):t.slideDown(300);$("body").hasClass("page-header-top-fixed")&&App.scrollTop()}});$(".hor-menu .menu-dropdown > a, .hor-menu .dropdown-submenu > a").on("click",function(t){App.getViewPort().width<n&&$(this).next().hasClass("dropdown-menu")&&(t.stopPropagation(),$(this).parent().hasClass("opened")?$(this).parent().removeClass("opened"):$(this).parent().addClass("opened"))});$(".hor-menu li > a").on("click",function(){App.getViewPort().width<n&&($(this).parent("li").hasClass("classic-menu-dropdown")||$(this).parent("li").hasClass("mega-menu-dropdown")||$(this).parent("li").hasClass("dropdown-submenu")||($(".page-header .page-header-menu").slideUp(300),App.scrollTop()))});$(document).on("click",".mega-menu-dropdown .dropdown-menu, .classic-menu-dropdown .dropdown-menu",function(n){n.stopPropagation()});$(window).scroll(function(){var n=75;$("body").hasClass("page-header-menu-fixed")&&($(window).scrollTop()>n?$(".page-header-menu").addClass("fixed"):$(".page-header-menu").removeClass("fixed"));$("body").hasClass("page-header-top-fixed")&&($(window).scrollTop()>n?$(".page-header-top").addClass("fixed"):$(".page-header-top").removeClass("fixed"))})},t=function(n,t,i){var u=encodeURI(location.hash).toLowerCase(),r=$(".hor-menu");(n==="click"||n==="set"?t=$(t):n==="match"&&r.find("li > a").each(function(){var r=$(this).attr("ui-sref"),n;if(i&&r){if(i.is(r)){t=$(this);return}}else if(n=$(this).attr("href"),n&&(n=n.toLowerCase(),n.length>1&&u.substr(1,n.length-1)==n.substr(1))){t=$(this);return}}),t&&t.size()!=0)&&t.attr("href")!="javascript:;"&&t.attr("ui-sref")!="javascript:;"&&t.attr("href")!="#"&&t.attr("ui-sref")!="#"&&(r.find("li.active").removeClass("active"),r.find("li > a > .selected").remove(),r.find("li.open").removeClass("open"),t.parents("li").each(function(){$(this).addClass("active");$(this).parent("ul.navbar-nav").size()===1&&$(this).find("> a").append('<span class="selected"><\/span>')}))},e=function(){var t=App.getViewPort().width,i=$(".page-header-menu");t>=n?$(".page-header-menu").css("display","block"):t<n&&$(".page-header-menu").css("display","none")},o=function(){$("body").height()<App.getViewPort().height&&(height=App.getViewPort().height-$(".page-header").outerHeight()-($(".page-container").outerHeight()-$(".page-content").outerHeight())-$(".page-prefooter").outerHeight()-$(".page-footer").outerHeight(),$(".page-content").css("min-height",height))},s=function(){var t=100,n=500;navigator.userAgent.match(/iPhone|iPad|iPod/i)?$(window).bind("touchend touchcancel touchleave",function(){$(this).scrollTop()>t?$(".scroll-to-top").fadeIn(n):$(".scroll-to-top").fadeOut(n)}):$(window).scroll(function(){$(this).scrollTop()>t?$(".scroll-to-top").fadeIn(n):$(".scroll-to-top").fadeOut(n)});$(".scroll-to-top").click(function(t){return t.preventDefault(),$("html, body").animate({scrollTop:0},n),!1})};return{initHeader:function(n){u();f();App.addResizeHandler(e);App.isAngularJsApp()&&t("match",null,n)},initContent:function(){o()},initFooter:function(){s()},init:function(){this.initHeader();this.initContent();this.initFooter()},setMainMenuActiveLink:function(n,i){t(n,i)},setAngularJsMainMenuActiveLink:function(n,i,r){t(n,i,r)},closeMainMenu:function(){$(".hor-menu").find("li.open").removeClass("open");App.getViewPort().width<n&&$(".page-header-menu").is(":visible")&&$(".page-header .menu-toggler").click()},getLayoutImgPath:function(){return App.getAssetsPath()+i},getLayoutCssPath:function(){return App.getAssetsPath()+r}}}();App.isAngularJsApp()===!1&&jQuery(document).ready(function(){Layout.init()});